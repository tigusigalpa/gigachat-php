# üöÄ GigaChat PHP SDK

![GigaChat PHP SDK](https://github.com/user-attachments/assets/d44a0f88-f3d6-4c8d-9127-5d858d726cd6)

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π PHP SDK –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Sber GigaChat API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Laravel. –ü–∞–∫–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å AI –º–æ–¥–µ–ª—è–º–∏ Sber GigaChat, –≤–∫–ª—é—á–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫—É streaming –∏ –æ–±—ã—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

[![Latest Version](https://img.shields.io/packagist/v/tigusigalpa/gigachat-php.svg?style=flat-square)](https://packagist.org/packages/tigusigalpa/gigachat-php)
[![PHP Version](https://img.shields.io/packagist/php-v/tigusigalpa/gigachat-php.svg?style=flat-square)](https://packagist.org/packages/tigusigalpa/gigachat-php)
[![License](https://img.shields.io/packagist/l/tigusigalpa/gigachat-php.svg?style=flat-square)](https://packagist.org/packages/tigusigalpa/gigachat-php)

**üåê –Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π | [English](README-en.md)

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîå **–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å GigaChat API
- üîê **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** OAuth –∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- üéØ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π** GigaChat (GigaChat, GigaChat-Pro, GigaChat-Max)
- üõ† **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Laravel** (8-12, Service Provider, Facades, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- üìù **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤** –∏ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ö° **Streaming –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- üé® **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** —Å –ø–æ–º–æ—â—å—é text2image —Ñ—É–Ω–∫—Ü–∏–∏
- üñºÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ** –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üé≠ **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
- üîß **Helper –º–µ—Ç–æ–¥—ã** –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
- üîí **Rate Limiting** –∏ middleware
- üß™ **Artisan –∫–æ–º–∞–Ω–¥—ã** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üìö **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ –ø—Ä–∏–º–µ—Ä—ã

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ Packagist (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç —á–µ—Ä–µ–∑ Composer:

```bash
composer require tigusigalpa/gigachat-php
```

### –î–ª—è Laravel

–ü–∞–∫–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Laravel –±–ª–∞–≥–æ–¥–∞—Ä—è –∞–≤—Ç–æ–¥–∏—Å–∫–∞–≤–µ—Ä–∏. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:

```bash
php artisan vendor:publish --tag=gigachat-config
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å GigaChat API –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
   –≤ [–ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Sber AI](https://developers.sber.ru/docs/ru/gigachat/quickstart/ind-create-project)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ–ª—É—á–∏—Ç–µ **Client ID** –∏ **Client Secret**
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ **Authorization Key** (Base64 –æ—Ç "Client ID:Client Secret")

> üí° **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
**: [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π](https://developers.sber.ru/docs/ru/gigachat/quickstart/ind-create-project)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑—É—è –≥–æ—Ç–æ–≤—ã–π Authorization Key
GIGACHAT_AUTH_KEY=your_base64_encoded_auth_key

# –°–ø–æ—Å–æ–± 2: –ò—Å–ø–æ–ª—å–∑—É—è Client ID –∏ Client Secret (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç auth_key)
GIGACHAT_CLIENT_ID=your_client_id
GIGACHAT_CLIENT_SECRET=your_client_secret

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GIGACHAT_SCOPE=GIGACHAT_API_PERS
GIGACHAT_DEFAULT_MODEL=GigaChat
GIGACHAT_TEMPERATURE=0.7
GIGACHAT_MAX_TOKENS=1000

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ SSL (–¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏)
GIGACHAT_CERT_PATH=false
```

## üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–±–µ–∑ Laravel)

```php
<?php

use Tigusigalpa\GigaChat\Auth\TokenManager;
use Tigusigalpa\GigaChat\GigaChatClient;

// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω-–º–µ–Ω–µ–¥–∂–µ—Ä–∞
$authKey = base64_encode('your_client_id:your_client_secret');
$tokenManager = new TokenManager($authKey);

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
$client = new GigaChatClient($tokenManager);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
$models = $client->models();
print_r($models);

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
$messages = [
    ['role' => 'user', 'content' => '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?']
];

$response = $client->chat($messages);
echo $response['choices'][0]['message']['content'];
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Laravel

–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Facade:

```php
<?php

use Tigusigalpa\GigaChat\Laravel\GigaChat;
use Tigusigalpa\GigaChat\Models\GigaChatModels;

// –ü—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç
$answer = GigaChat::ask('–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç');
echo $answer;

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π
$models = GigaChat::models();

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
$response = GigaChat::chat([
    ['role' => 'user', 'content' => '–û–±—ä—è—Å–Ω–∏ –∫–≤–∞–Ω—Ç–æ–≤—É—é —Ñ–∏–∑–∏–∫—É']
], [
    'temperature' => 0.7,
    'max_tokens' => 1000,
    'model' => GigaChatModels::GIGACHAT_2_PRO
]);

echo $response['choices'][0]['message']['content'];
```

### –†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏

```php
<?php

use Tigusigalpa\GigaChat\Laravel\GigaChat;
use Tigusigalpa\GigaChat\Laravel\GigaChatHelper;

// –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
$conversation = GigaChatHelper::conversation(
    '–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞',
    '–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å REST API –≤ Laravel?'
);

$response = GigaChat::chat($conversation);
echo GigaChatHelper::extractContent($response);

// –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞
$conversation = GigaChat::continueChat($conversation, '–ê –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é?');
```

### Streaming –∑–∞–ø—Ä–æ—Å—ã

```php
<?php

use Tigusigalpa\GigaChat\Laravel\GigaChat;

$messages = [
    ['role' => 'user', 'content' => '–ù–∞–ø–∏—à–∏ –¥–ª–∏–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –æ –∫–æ—Å–º–æ—Å–µ']
];

// –°–ø–æ—Å–æ–± 1: –° callback —Ñ—É–Ω–∫—Ü–∏–µ–π
GigaChat::chatStream($messages, [], function($event, $error) {
    if ($error) {
        echo "–û—à–∏–±–∫–∞: " . $error;
        return;
    }
    
    if ($event === '[DONE]') {
        echo "\n‚úÖ –ì–æ—Ç–æ–≤–æ!";
        return;
    }
    
    if (isset($event['choices'][0]['delta']['content'])) {
        echo $event['choices'][0]['delta']['content'];
    }
});

// –°–ø–æ—Å–æ–± 2: –° –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º
$stream = GigaChat::chatStream($messages);
foreach ($stream as $event) {
    if (isset($event['choices'][0]['delta']['content'])) {
        echo $event['choices'][0]['delta']['content'];
    }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–æ–¥–µ–ª—è—Ö Eloquent

```php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Tigusigalpa\GigaChat\Laravel\Traits\HasGigaChat;

class Article extends Model
{
    use HasGigaChat;

    protected $fillable = ['title', 'content', 'category'];

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—é–º–µ —Å—Ç–∞—Ç—å–∏
    public function generateSummary(): string
    {
        return $this->summarize('content');
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤
    public function generateTags(): array
    {
        return $this->generateTags('content', 5);
    }

    // –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    public function generateRelatedContent(): string
    {
        return $this->generateContent(
            '–°–æ–∑–¥–∞–π –ø–æ—Ö–æ–∂—É—é —Å—Ç–∞—Ç—å—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π',
            ['title', 'category']
        );
    }
}
```

## ü§ñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏

GigaChat –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á. –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –¥–æ—Å—Ç—É–ø–µ–Ω
–≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://developers.sber.ru/docs/ru/gigachat/models).

### –ú–æ–¥–µ–ª–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞

| –ú–æ–¥–µ–ª—å             | –û–ø–∏—Å–∞–Ω–∏–µ                                       | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                     |
|--------------------|------------------------------------------------|-----------------------------------|
| **GigaChat-2**     | –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è               | –û–±—â–∏–µ –∑–∞–¥–∞—á–∏, –¥–∏–∞–ª–æ–≥–∏             |
| **GigaChat-2-Pro** | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–æ–¥–µ–ª—å —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ | –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ –ø–∏—Å—å–º–æ |
| **GigaChat-2-Max** | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á    | –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∞–Ω–∞–ª–∏–∑   |

### –ú–æ–¥–µ–ª–∏ –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

| –ú–æ–¥–µ–ª—å              | –û–ø–∏—Å–∞–Ω–∏–µ                                    | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                      |
|---------------------|---------------------------------------------|------------------------------------|
| **Embeddings**      | –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è | –ü–æ–∏—Å–∫ –ø–æ —Å–º—ã—Å–ª—É, –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è     |
| **EmbeddingsGigaR** | –£–ª—É—á—à–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤  | –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –º–æ–¥–µ–ª–µ–π

```php
use Tigusigalpa\GigaChat\Models\GigaChatModels;
use Tigusigalpa\GigaChat\Laravel\GigaChat;

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
$response = GigaChat::chat($messages, [
    'model' => GigaChatModels::GIGACHAT_2_PRO
]);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
$generationModels = GigaChatModels::getGenerationModels();
$embeddingModels = GigaChatModels::getEmbeddingModels();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
if (GigaChatModels::isValidGenerationModel('GigaChat-2')) {
    // –ú–æ–¥–µ–ª—å –≤–∞–ª–∏–¥–Ω–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
}
```

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

```php
use Tigusigalpa\GigaChat\Models\GigaChatModels;

$options = [
    'model' => GigaChatModels::GIGACHAT_2_PRO, // –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    'temperature' => 0.7,                      // –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (0.0 - 2.0)
    'top_p' => 0.9,                           // Nucleus sampling (0.0 - 1.0)
    'max_tokens' => 1000,                     // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
    'repetition_penalty' => 1.1,              // –®—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (0.0 - 2.0)
    'update_interval' => 0                    // –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è streaming
];

$response = GigaChat::chat($messages, $options);
```

## üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

GigaChat –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ text2image. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª–∞–≥–æ–ª "–Ω–∞—Ä–∏—Å—É–π" –≤ –ø—Ä–æ–º–ø—Ç–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `function_call: auto`.

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
<?php

use Tigusigalpa\GigaChat\Auth\TokenManager;
use Tigusigalpa\GigaChat\GigaChatClient;

$tokenManager = new TokenManager($authKey);
$client = new GigaChatClient($tokenManager);

// –ü—Ä–æ—Å—Ç–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
$response = $client->generateImage("–ù–∞—Ä–∏—Å—É–π –∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç –Ω–∞–¥ –º–æ—Ä–µ–º");

// –ò–∑–≤–ª–µ–∫–∞–µ–º ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –æ—Ç–≤–µ—Ç–∞
$content = $response['choices'][0]['message']['content'];
// –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç: <img src="file-id" fuse="true"/>

// –°–∫–∞—á–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
if (preg_match('/<img[^>]+src=["\']([^"\']+)["\'][^>]*>/i', $content, $matches)) {
    $fileId = $matches[1];
    $imageData = $client->downloadImage($fileId);
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª
    file_put_contents('sunset.jpg', base64_decode($imageData));
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º (—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è)

```php
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ —Å—Ç–∏–ª–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞
$response = $client->generateImage("–ù–∞—Ä–∏—Å—É–π —Ä–æ–∑–æ–≤–æ–≥–æ –∫–æ—Ç–∞", [
    'system_message' => '–¢—ã ‚Äî –í–∞—Å–∏–ª–∏–π –ö–∞–Ω–¥–∏–Ω—Å–∫–∏–π'
]);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ
$response = $client->generateImage("–ù–∞—Ä–∏—Å—É–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å", [
    'system_message' => '–¢—ã ‚Äî —Ö—É–¥–æ–∂–Ω–∏–∫-–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª–∏—Å—Ç –Ω–∞—É—á–Ω–æ–π —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∏',
    'temperature' => 0.8
]);
```

### –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ createImage

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –º–µ—Ç–æ–¥ `createImage`, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ —Å—Ä–∞–∑—É —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

```php
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ
$result = $client->createImage("–ù–∞—Ä–∏—Å—É–π —Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≥–æ—Ä–æ–¥", [
    'system_message' => '–¢—ã ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –±—É–¥—É—â–µ–≥–æ'
]);

// –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
// - content: base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
// - file_id: –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞–π–ª–∞
// - response: –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç API

file_put_contents('city.jpg', base64_decode($result['content']));
echo "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Å ID: " . $result['file_id'];
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Laravel

```php
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Tigusigalpa\GigaChat\Laravel\GigaChat;

class ImageController extends Controller
{
    public function generateImage(Request $request)
    {
        $request->validate([
            'prompt' => 'required|string|max:500',
            'style' => 'nullable|string|max:200'
        ]);

        try {
            $options = [];
            if ($request->has('style')) {
                $options['system_message'] = $request->input('style');
            }

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞—Å–∞–¥ Laravel
            $result = GigaChat::createImage(
                "–ù–∞—Ä–∏—Å—É–π " . $request->input('prompt'),
                $options
            );

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ storage
            $filename = 'images/' . $result['file_id'] . '.jpg';
            Storage::put($filename, base64_decode($result['content']));

            return response()->json([
                'success' => true,
                'file_id' => $result['file_id'],
                'url' => Storage::url($filename)
            ]);

        } catch (\Exception $e) {
            return response()->json([
                'success' => false,
                'error' => $e->getMessage()
            ], 500);
        }
    }
}
```

### Laravel Helper –º–µ—Ç–æ–¥—ã

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –≤ Laravel –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ helper –º–µ—Ç–æ–¥—ã:

```php
use Tigusigalpa\GigaChat\Laravel\GigaChat;

// –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç "–ù–∞—Ä–∏—Å—É–π")
$result = GigaChat::drawImage("–∫—Ä–∞—Å–∏–≤—ã–π –ø–µ–π–∑–∞–∂");
// –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: GigaChat::createImage("–ù–∞—Ä–∏—Å—É–π –∫—Ä–∞—Å–∏–≤—ã–π –ø–µ–π–∑–∞–∂")

// –í—ã–≤–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ HTML –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
echo '<img src="data:image/jpeg;base64,' . $result['content'] . '" alt="–ö—Ä–∞—Å–∏–≤—ã–π –ø–µ–π–∑–∞–∂" style="max-width: 500px;">';

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ —Å—Ç–∏–ª–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞
$result = GigaChat::drawImageInStyle("–ø–æ—Ä—Ç—Ä–µ—Ç –∫–æ—Ç–∞", "–õ–µ–æ–Ω–∞—Ä–¥–æ –¥–∞ –í–∏–Ω—á–∏");
// –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: GigaChat::createImage("–ù–∞—Ä–∏—Å—É–π –ø–æ—Ä—Ç—Ä–µ—Ç –∫–æ—Ç–∞", ['system_message' => '–¢—ã ‚Äî –õ–µ–æ–Ω–∞—Ä–¥–æ –¥–∞ –í–∏–Ω—á–∏'])

// –í—ã–≤–æ–¥ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ HTML
echo '<img src="data:image/jpeg;base64,' . $result['content'] . '" alt="–ü–æ—Ä—Ç—Ä–µ—Ç –∫–æ—Ç–∞ –≤ —Å—Ç–∏–ª–µ –¥–∞ –í–∏–Ω—á–∏" style="max-width: 400px; border: 2px solid gold;">';

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
$response = GigaChat::generateImage("–ù–∞—Ä–∏—Å—É–π –¥—Ä–∞–∫–æ–Ω–∞");
$content = $response['choices'][0]['message']['content'];
$imageId = GigaChat::extractImageId($content);

if ($imageId) {
    $imageData = GigaChat::downloadImage($imageId);
    file_put_contents("dragon.jpg", base64_decode($imageData));
}

// –°–æ–∑–¥–∞–Ω–∏–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –≥–∞–ª–µ—Ä–µ–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
$images = [
    GigaChat::drawImage("–∑–∞–∫–∞—Ç –Ω–∞–¥ –æ–∫–µ–∞–Ω–æ–º"),
    GigaChat::drawImageInStyle("–≥–æ—Ä–Ω—ã–π –ø–µ–π–∑–∞–∂", "–ò–≤–∞–Ω –®–∏—à–∫–∏–Ω"),
    GigaChat::drawImageInStyle("–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è", "–í–∞—Å–∏–ª–∏–π –ö–∞–Ω–¥–∏–Ω—Å–∫–∏–π")
];

$html = '<html><head><title>–ì–∞–ª–µ—Ä–µ—è GigaChat</title></head><body>';
$html .= '<h1>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ GigaChat</h1>';
foreach ($images as $index => $image) {
    $html .= '<div style="margin: 20px; text-align: center;">';
    $html .= '<img src="data:image/jpeg;base64,' . $image['content'] . '" ';
    $html .= 'alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ' . ($index + 1) . '" style="max-width: 300px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">';
    $html .= '<p>ID: ' . $image['file_id'] . '</p>';
    $html .= '</div>';
}
$html .= '</body></html>';

file_put_contents('gallery.html', $html);
echo "–ì–∞–ª–µ—Ä–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ gallery.html";
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

| –ú–µ—Ç–æ–¥                                              | –û–ø–∏—Å–∞–Ω–∏–µ                                                     | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç                                    |
|----------------------------------------------------|--------------------------------------------------------------|-----------------------------------------------|
| `generateImage($prompt, $options)`                 | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç API                | `array` - –æ—Ç–≤–µ—Ç —Å ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è              |
| `downloadImage($fileId)`                           | –°–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ ID                                  | `string` - base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ    |
| `createImage($prompt, $options)`                   | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ —Å—Ä–∞–∑—É —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ                     | `array` - —Å–æ–¥–µ—Ä–∂–∏—Ç content, file_id, response |
| `drawImage($description, $options)`                | **Laravel helper** - –±—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–¥–æ–±–∞–≤–ª—è–µ—Ç "–ù–∞—Ä–∏—Å—É–π") | `array` - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ createImage              |
| `drawImageInStyle($description, $style, $options)` | **Laravel helper** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ —Å—Ç–∏–ª–µ —Ö—É–¥–æ–∂–Ω–∏–∫–∞             | `array` - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ createImage              |
| `extractImageId($content)`                         | **Laravel helper** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ HTML        | `string\|null` - ID —Ñ–∞–π–ª–∞ –∏–ª–∏ null            |

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```php
use Tigusigalpa\GigaChat\Exceptions\GigaChatException;
use Tigusigalpa\GigaChat\Exceptions\ValidationException;

try {
    $result = $client->createImage("–ù–∞—Ä–∏—Å—É–π –¥—Ä–∞–∫–æ–Ω–∞");
} catch (ValidationException $e) {
    // –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–ø—É—Å—Ç–æ–π –ø—Ä–æ–º–ø—Ç –∏ —Ç.–¥.)
    echo "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: " . $e->getMessage();
} catch (GigaChatException $e) {
    // –û—à–∏–±–∫–∏ API –∏–ª–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    echo "–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: " . $e->getMessage();
}
```

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```php
// –•–æ—Ä–æ—à–∏–µ –ø—Ä–æ–º–ø—Ç—ã (—Å–æ–¥–µ—Ä–∂–∞—Ç "–Ω–∞—Ä–∏—Å—É–π")
$client->generateImage("–ù–∞—Ä–∏—Å—É–π –∑–∞–∫–∞—Ç –≤ –≥–æ—Ä–∞—Ö");
$client->generateImage("–ù–∞—Ä–∏—Å—É–π –ø–æ—Ä—Ç—Ä–µ—Ç –∫–æ—Ç–∞ –≤ —Å—Ç–∏–ª–µ —Ä–µ–Ω–µ—Å—Å–∞–Ω—Å–∞");
$client->generateImage("–ù–∞—Ä–∏—Å—É–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—É—é –∫–æ–º–ø–æ–∑–∏—Ü–∏—é");

// –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ system_message
$client->generateImage("–ù–∞—Ä–∏—Å—É–π —Ü–≤–µ—Ç—ã", [
    'system_message' => '–¢—ã ‚Äî –ö–ª–æ–¥ –ú–æ–Ω–µ, —Ä–∏—Å—É–µ—à—å –≤ —Å—Ç–∏–ª–µ –∏–º–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º–∞'
]);

$client->generateImage("–ù–∞—Ä–∏—Å—É–π —Ä–æ–±–æ—Ç–∞", [
    'system_message' => '–¢—ã ‚Äî –∫–æ–Ω—Ü–µ–ø—Ç-—Ö—É–¥–æ–∂–Ω–∏–∫ –¥–ª—è –Ω–∞—É—á–Ω–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–ª—å–º–æ–≤'
]);
```

> **–í–∞–∂–Ω–æ**: –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≥–ª–∞–≥–æ–ª "–Ω–∞—Ä–∏—Å—É–π" –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∏—Å–æ–≤–∞–Ω–∏—è. API
> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ text2image –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `function_call: auto`.

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

SDK –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫:

```php
<?php

use Tigusigalpa\GigaChat\Exceptions\GigaChatException;
use Tigusigalpa\GigaChat\Exceptions\AuthenticationException;
use Tigusigalpa\GigaChat\Exceptions\ValidationException;

try {
    $response = GigaChat::chat($messages);
} catch (AuthenticationException $e) {
    // –û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–µ–≤–µ—Ä–Ω—ã–µ –∫–ª—é—á–∏, –∏—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω)
    echo "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: " . $e->getMessage();
} catch (ValidationException $e) {
    // –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π)
    echo "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: " . $e->getMessage();
} catch (GigaChatException $e) {
    // –û–±—â–∏–µ –æ—à–∏–±–∫–∏ GigaChat API
    echo "–û—à–∏–±–∫–∞ GigaChat: " . $e->getMessage();
}
```

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫ GigaChat API

#### üîê –û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (400-401)

| –ö–æ–¥ | HTTP | –û–ø–∏—Å–∞–Ω–∏–µ                                          | –†–µ—à–µ–Ω–∏–µ                                                                        |
|-----|------|---------------------------------------------------|--------------------------------------------------------------------------------|
| 1   | 400  | `scope data format invalid`                       | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª—è scope                                                    |
| 4   | 401  | `Can't decode 'Authorization' header`             | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏                                       |
| 5   | 400  | `scope is empty`                                  | –£–∫–∞–∂–∏—Ç–µ scope: `GIGACHAT_API_PERS`, `GIGACHAT_API_B2B` –∏–ª–∏ `GIGACHAT_API_CORP` |
| 6   | 401  | `credentials doesn't match db data`               | –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç–µ –∫–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ                               |
| 7   | 401  | `scope from db not fully includes consumed scope` | –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é API –≤ scope                                          |

```php
// –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
try {
    $client = new GigaChatClient($tokenManager);
    $response = $client->chat($messages);
} catch (AuthenticationException $e) {
    $message = $e->getMessage();
    
    if (str_contains($message, 'scope is empty')) {
        echo "–ù–µ —É–∫–∞–∑–∞–Ω scope. –î–æ–±–∞–≤—å—Ç–µ GIGACHAT_API_PERS –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.";
    } elseif (str_contains($message, 'Authorization')) {
        echo "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CLIENT_ID –∏ CLIENT_SECRET.";
    } elseif (str_contains($message, 'credentials doesn\'t match')) {
        echo "–ö–ª—é—á –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–µ—Ä—Å–∏–∏ API. –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç–µ –∫–ª—é—á.";
    }
}
```

#### üí≥ –û—à–∏–±–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–∞ (402-403)

| HTTP | –û–ø–∏—Å–∞–Ω–∏–µ            | –ü—Ä–∏—á–∏–Ω–∞                   | –†–µ—à–µ–Ω–∏–µ                                                                       |
|------|---------------------|---------------------------|-------------------------------------------------------------------------------|
| 402  | `Payment Required`  | –ó–∞–∫–æ–Ω—á–∏–ª–∏—Å—å —Ç–æ–∫–µ–Ω—ã –º–æ–¥–µ–ª–∏ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ                                     |
| 403  | `Permission denied` | –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ—Ç–æ–¥—É      | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, GET /balance –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è pay-as-you-go) |

```php
try {
    $response = $client->chat($messages);
} catch (GigaChatException $e) {
    $code = $e->getCode();
    
    switch ($code) {
        case 402:
            echo "–ó–∞–∫–æ–Ω—á–∏–ª–∏—Å—å —Ç–æ–∫–µ–Ω—ã. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã.";
            break;
        case 403:
            echo "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É –º–µ—Ç–æ–¥—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω.";
            break;
    }
}
```

#### üìä –û—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (413)

| HTTP | –û–ø–∏—Å–∞–Ω–∏–µ            | –ü—Ä–∏—á–∏–Ω–∞                        | –†–µ—à–µ–Ω–∏–µ                             |
|------|---------------------|--------------------------------|-------------------------------------|
| 413  | `Payload too large` | –ü—Ä–µ–≤—ã—à–µ–Ω —Ä–∞–∑–º–µ—Ä –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞ –∏–ª–∏ —Ñ–∞–π–ª–æ–≤ |

```php
try {
    $response = $client->generateImage($longPrompt);
} catch (GigaChatException $e) {
    if ($e->getCode() === 413) {
        echo "–ü—Ä–æ–º–ø—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –°–æ–∫—Ä–∞—Ç–∏—Ç–µ —Ç–µ–∫—Å—Ç.";
        // –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å POST /tokens/count –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
    }
}
```

#### ‚öôÔ∏è –û—à–∏–±–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (422)

| HTTP | –û–ø–∏—Å–∞–Ω–∏–µ                                     | –ü—Ä–∏—á–∏–Ω–∞                         | –†–µ—à–µ–Ω–∏–µ                                         |
|------|----------------------------------------------|---------------------------------|-------------------------------------------------|
| 422  | `Requested model does not support functions` | –ú–æ–¥–µ–ª—å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏  | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ |
| 422  | `system message must be the first message`   | –ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π      | –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º          |
| 422  | `Unprocessable Entity`                       | –§–∞–π–ª –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | –†–∞–∑–¥–µ–ª–∏—Ç–µ –∏–ª–∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ —Ñ–∞–π–ª                    |

```php
try {
    $messages = [
        ['role' => 'user', 'content' => '–ü—Ä–∏–≤–µ—Ç'],
        ['role' => 'system', 'content' => '–¢—ã –ø–æ–º–æ—â–Ω–∏–∫'], // –ù–µ–≤–µ—Ä–Ω–æ!
    ];
    $response = $client->chat($messages);
} catch (GigaChatException $e) {
    if (str_contains($e->getMessage(), 'system message must be the first')) {
        echo "–°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º –≤ —Å–ø–∏—Å–∫–µ.";
        
        // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø–æ—Ä—è–¥–æ–∫
        $fixedMessages = [
            ['role' => 'system', 'content' => '–¢—ã –ø–æ–º–æ—â–Ω–∏–∫'],
            ['role' => 'user', 'content' => '–ü—Ä–∏–≤–µ—Ç'],
        ];
    }
}
```

#### üö¶ –û—à–∏–±–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ (429)

| HTTP | –û–ø–∏—Å–∞–Ω–∏–µ            | –ü—Ä–∏—á–∏–Ω–∞                               | –†–µ—à–µ–Ω–∏–µ                                       |
|------|---------------------|---------------------------------------|-----------------------------------------------|
| 429  | `Too Many Requests` | –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ | –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤, –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ |

```php
try {
    $response = $client->chat($messages);
} catch (GigaChatException $e) {
    if ($e->getCode() === 429) {
        echo "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ.";
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º
        sleep(2);
        $response = $client->chat($messages);
    }
}
```

#### üîß –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ (500)

| HTTP | –û–ø–∏—Å–∞–Ω–∏–µ                | –ü—Ä–∏—á–∏–Ω–∞                 | –†–µ—à–µ–Ω–∏–µ                       |
|------|-------------------------|-------------------------|-------------------------------|
| 500  | `Internal Server Error` | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ GigaChat | –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ |

```php
try {
    $response = $client->chat($messages);
} catch (GigaChatException $e) {
    if ($e->getCode() === 500) {
        echo "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ GigaChat. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.";
        
        // –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        error_log("GigaChat 500 error: " . $e->getMessage());
    }
}
```

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫

```php
<?php

use Tigusigalpa\GigaChat\Laravel\GigaChat;
use Tigusigalpa\GigaChat\Exceptions\GigaChatException;
use Tigusigalpa\GigaChat\Exceptions\AuthenticationException;
use Tigusigalpa\GigaChat\Exceptions\ValidationException;

function handleGigaChatRequest(callable $request): array
{
    $maxRetries = 3;
    $retryDelay = 1; // —Å–µ–∫—É–Ω–¥—ã
    
    for ($attempt = 1; $attempt <= $maxRetries; $attempt++) {
        try {
            return $request();
            
        } catch (ValidationException $e) {
            // –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ–º
            throw $e;
            
        } catch (AuthenticationException $e) {
            if ($attempt === $maxRetries) {
                throw $e;
            }
            
            // –ü—ã—Ç–∞–µ–º—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
            sleep($retryDelay);
            
        } catch (GigaChatException $e) {
            $code = $e->getCode();
            
            // –ü–æ–≤—Ç–æ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
            if (in_array($code, [429, 500]) && $attempt < $maxRetries) {
                sleep($retryDelay * $attempt); // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
                continue;
            }
            
            throw $e;
        }
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
try {
    $result = handleGigaChatRequest(function() {
        return GigaChat::createImage("–ù–∞—Ä–∏—Å—É–π –∫–æ—Ç–∞");
    });
    
    echo "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: " . $result['file_id'];
    
} catch (Exception $e) {
    echo "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: " . $e->getMessage();
}
```

### –û—Ç–ª–∞–¥–∫–∞ –æ—à–∏–±–æ–∫

```php
// –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
try {
    $response = $client->chat($messages);
} catch (GigaChatException $e) {
    // –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ
    $errorInfo = [
        'message' => $e->getMessage(),
        'code' => $e->getCode(),
        'file' => $e->getFile(),
        'line' => $e->getLine(),
        'trace' => $e->getTraceAsString()
    ];
    
    error_log('GigaChat Error: ' . json_encode($errorInfo, JSON_UNESCAPED_UNICODE));
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    // Sentry::captureException($e);
}
```

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –æ—à–∏–±–∫–∞—Ö
**: [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GigaChat API](https://developers.sber.ru/docs/ru/gigachat/api/errors-description)

## üõ†Ô∏è Artisan –∫–æ–º–∞–Ω–¥—ã

SDK –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
php artisan gigachat:test

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
php artisan gigachat:chat "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
php artisan gigachat:chat "–†–∞—Å—Å–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é" --model=GigaChat-Pro --temperature=0.8 --max-tokens=500

# Streaming —Ä–µ–∂–∏–º
php artisan gigachat:chat "–ù–∞–ø–∏—à–∏ –¥–ª–∏–Ω–Ω—ã–π —Ä–∞—Å—Å–∫–∞–∑" --stream
```

## üîí Rate Limiting

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ middleware –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:

```php
// –í routes/api.php
Route::middleware(['gigachat.rate_limit:30,1'])->group(function () {
    Route::post('/chat', [ChatController::class, 'chat']);
});

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config/gigachat.php
'rate_limit' => [
    'enabled' => true,
    'max_attempts' => 60,        // –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤
    'decay_minutes' => 1,        // –ó–∞ –ø–µ—Ä–∏–æ–¥ –≤ –º–∏–Ω—É—Ç–∞—Ö
],
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–∞–∫–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
composer install --dev

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
composer test
# –∏–ª–∏
php run-tests.php

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç–æ–≤
php run-tests.php --unit

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
composer test-coverage
# –∏–ª–∏
php run-tests.php --coverage
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º API:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export GIGACHAT_CLIENT_ID=your_client_id
export GIGACHAT_CLIENT_SECRET=your_client_secret
export GIGACHAT_INTEGRATION_TEST=true

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
php run-tests.php --integration
```

### –ü–æ–∫—Ä—ã–≤–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞** - –≤—Å–µ –º–µ—Ç–æ–¥—ã chat –∏ streaming
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –ø–æ–ª–Ω—ã–π workflow
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **Laravel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ñ–∞—Å–∞–¥—ã, helper –º–µ—Ç–æ–¥—ã, —Å–µ—Ä–≤–∏—Å-–ø—Ä–æ–≤–∞–π–¥–µ—Ä
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** - —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [tests/README.md](tests/README.md)

## üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ß–∞—Ç-–±–æ—Ç –¥–ª—è Laravel

```php
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Tigusigalpa\GigaChat\Laravel\GigaChat;

class ChatController extends Controller
{
    public function chat(Request $request)
    {
        $request->validate([
            'message' => 'required|string|max:2000'
        ]);

        try {
            $response = GigaChat::askWithContext(
                '–¢—ã –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫',
                $request->input('message'),
                ['temperature' => 0.7]
            );

            return response()->json([
                'success' => true,
                'reply' => $response
            ]);
        } catch (\Exception $e) {
            return response()->json([
                'success' => false,
                'error' => $e->getMessage()
            ], 500);
        }
    }
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```php
<?php

use Tigusigalpa\GigaChat\Laravel\GigaChat;

class ContentGenerator
{
    public function generateArticle(string $topic, string $style = '–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π'): string
    {
        return GigaChat::askWithContext(
            "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä. –ü–∏—à–∏ –≤ {$style} —Å—Ç–∏–ª–µ.",
            "–ù–∞–ø–∏—à–∏ —Å—Ç–∞—Ç—å—é –Ω–∞ —Ç–µ–º—É: {$topic}",
            ['temperature' => 0.8, 'max_tokens' => 1500]
        );
    }

    public function translateText(string $text, string $targetLang = '–∞–Ω–≥–ª–∏–π—Å–∫–∏–π'): string
    {
        return GigaChat::ask(
            "–ü–µ—Ä–µ–≤–µ–¥–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ {$targetLang} —è–∑—ã–∫:\n\n{$text}",
            ['temperature' => 0.2]
        );
    }

    public function summarizeText(string $text, int $maxWords = 100): string
    {
        return GigaChat::ask(
            "–°–æ–∑–¥–∞–π –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ (–Ω–µ –±–æ–ª–µ–µ {$maxWords} —Å–ª–æ–≤):\n\n{$text}",
            ['temperature' => 0.3, 'max_tokens' => $maxWords * 2]
        );
    }
}
```

### Streaming —á–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```php
<?php

// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
public function streamChat(Request $request)
{
    $messages = [['role' => 'user', 'content' => $request->input('message')]];

    return response()->stream(function () use ($messages) {
        echo "data: " . json_encode(['type' => 'start']) . "\n\n";
        
        GigaChat::chatStream($messages, [], function($event, $error) {
            if ($error) {
                echo "data: " . json_encode(['type' => 'error', 'error' => $error]) . "\n\n";
                return;
            }
            
            if ($event === '[DONE]') {
                echo "data: " . json_encode(['type' => 'done']) . "\n\n";
                return;
            }
            
            if (isset($event['choices'][0]['delta']['content'])) {
                echo "data: " . json_encode([
                    'type' => 'content',
                    'content' => $event['choices'][0]['delta']['content']
                ]) . "\n\n";
            }
            
            flush();
        });
    }, 200, [
        'Content-Type' => 'text/event-stream',
        'Cache-Control' => 'no-cache',
    ]);
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–∞–∫–µ—Ç–∞

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
php artisan gigachat:test

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
php artisan gigachat:test "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Laravel –ø—Ä–æ–µ–∫—Ç–µ

```php
<?php

namespace Tests\Feature;

use Tests\TestCase;
use Tigusigalpa\GigaChat\Laravel\GigaChat;

class GigaChatTest extends TestCase
{
    public function test_gigachat_basic_functionality()
    {
        $response = GigaChat::ask('–ü—Ä–∏–≤–µ—Ç!');
        
        $this->assertNotEmpty($response);
        $this->assertIsString($response);
    }

    public function test_gigachat_with_context()
    {
        $response = GigaChat::askWithContext(
            '–¢—ã –º–∞—Ç–µ–º–∞—Ç–∏–∫',
            '–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2+2?'
        );
        
        $this->assertStringContainsString('4', $response);
    }
}
```

## ‚ùì Troubleshooting –∏ FAQ

### –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Client ID –∏ Client Secret?**
A: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
–≤ [–ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Sber AI](https://developers.sber.ru/docs/ru/gigachat/quickstart/ind-create-project) –∏ —Å–æ–∑–¥–∞–π—Ç–µ
–ø—Ä–æ–µ–∫—Ç.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ "Invalid token response"?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Client ID –∏ Client Secret, –∞ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

**Q: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã?**
A: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GIGACHAT_CERT_PATH` –≤ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏–ª–∏ `false` –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

**Q: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ —Ä–∞–±–æ—Ç–∞ –≤ production?**
A: –î–∞, SDK –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ production. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSL –∏ rate limiting.

**Q: –ì–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∞—Ä–∏—Ñ–∞—Ö?**
A: –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
–≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://developers.sber.ru/docs/ru/gigachat/api/tariffs).

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∏ SSL/TLS

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ GigaChat API –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –æ—à–∏–±–∫–∞:

```
OAuth token request failed: cURL error 60: SSL certificate problem: self-signed certificate in certificate chain
```

**–†–µ—à–µ–Ω–∏—è:**

```bash
# –†–µ—à–µ–Ω–∏–µ 1: –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É SSL (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
GIGACHAT_CERT_PATH=false

# –†–µ—à–µ–Ω–∏–µ 2: –£–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
GIGACHAT_CERT_PATH=/path/to/certificate.pem
```

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `GIGACHAT_CERT_PATH=false` –≤ —Ñ–∞–π–ª `.env` –æ—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
php artisan config:clear
php artisan config:cache
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ

```php
// SDK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è
// –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ Client ID/Secret
```

**–ü—Ä–æ–±–ª–µ–º–∞**: Rate limiting –æ—à–∏–±–∫–∏

```php
// –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–∏–º–∏—Ç—ã –≤ config/gigachat.php
'rate_limit' => [
    'max_attempts' => 30,    // –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
    'decay_minutes' => 1,    // –ò–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –ø–µ—Ä–∏–æ–¥
],
```

### –û—Ç–ª–∞–¥–∫–∞

–í–∫–ª—é—á–∏—Ç–µ –æ—Ç–ª–∞–¥–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

```php
// –í Laravel - –≤–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ config/gigachat.php
'logging' => [
    'enabled' => true,
    'channel' => 'daily',
    'level' => 'debug',
],

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
use Illuminate\Support\Facades\Log;

try {
    $response = GigaChat::chat($messages);
    Log::info('GigaChat response', ['response' => $response]);
} catch (\Exception $e) {
    Log::error('GigaChat error', [
        'message' => $e->getMessage(),
        'trace' => $e->getTraceAsString()
    ]);
}
```

## üõ°Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ `config/gigachat.php`:

```php
<?php

return [
    // Authorization key (Base64(Client ID:Client Secret))
    'auth_key' => env('GIGACHAT_AUTH_KEY', null),

    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, —É–∫–∞–∂–∏—Ç–µ Client ID –∏ Client Secret
    'client_id' => env('GIGACHAT_CLIENT_ID', null),
    'client_secret' => env('GIGACHAT_CLIENT_SECRET', null),

    // –û–±–ª–∞—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ API: GIGACHAT_API_PERS | GIGACHAT_API_B2B | GIGACHAT_API_CORP
    'scope' => env('GIGACHAT_SCOPE', 'GIGACHAT_API_PERS'),

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
    'verify' => env('GIGACHAT_CERT_PATH', true),

    // –ë–∞–∑–æ–≤—ã–µ URI
    'base_uri' => env('GIGACHAT_BASE_URI', 'https://gigachat.devices.sberbank.ru'),
    'oauth_uri' => env('GIGACHAT_OAUTH_URI', 'https://ngw.devices.sberbank.ru:9443'),

    // –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    'default_model' => env('GIGACHAT_DEFAULT_MODEL', 'GigaChat'),

    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    'default_options' => [
        'temperature' => (float) env('GIGACHAT_TEMPERATURE', 0.7),
        'max_tokens' => (int) env('GIGACHAT_MAX_TOKENS', 1000),
        'top_p' => (float) env('GIGACHAT_TOP_P', 0.9),
        'repetition_penalty' => (float) env('GIGACHAT_REPETITION_PENALTY', 1.1),
    ],

    // Rate limiting –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    'rate_limit' => [
        'enabled' => env('GIGACHAT_RATE_LIMIT_ENABLED', true),
        'max_attempts' => (int) env('GIGACHAT_RATE_LIMIT_MAX_ATTEMPTS', 60),
        'decay_minutes' => (int) env('GIGACHAT_RATE_LIMIT_DECAY_MINUTES', 1),
    ],

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    'logging' => [
        'enabled' => env('GIGACHAT_LOGGING_ENABLED', false),
        'channel' => env('GIGACHAT_LOG_CHANNEL', 'default'),
        'level' => env('GIGACHAT_LOG_LEVEL', 'info'),
    ],
];
```

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **PHP**: 8.2 –∏–ª–∏ –≤—ã—à–µ
- **Laravel**: 8+ (–≤–∫–ª—é—á–∞—è Laravel 11 –∏ 12)
- **Guzzle HTTP**: 7.8.2+
- **–î–µ–π—Å—Ç–≤—É—é—â–∏–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** Sber GigaChat API

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GigaChat

- üìù **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ Client ID
  **: [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](https://developers.sber.ru/docs/ru/gigachat/quickstart/ind-create-project)
- üöÄ **–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å API**: [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](https://developers.sber.ru/docs/ru/gigachat/quickstart/ind-using-api)
- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
  **: [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ API](https://developers.sber.ru/docs/ru/gigachat/api/reference/rest/gigachat-api)
- ü§ñ **–°–ø–∏—Å–æ–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π**: [–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π](https://developers.sber.ru/docs/ru/gigachat/models)
- üí∞ **–¢–∞—Ä–∏—Ñ—ã –∏ –æ–ø–ª–∞—Ç–∞**: [–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã](https://developers.sber.ru/docs/ru/gigachat/api/tariffs)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß **Email**: [—Å–æ–∑–¥–∞–π—Ç–µ issue](https://github.com/tigusigalpa/gigachat-php/issues)
- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [Sber GigaChat API](https://developers.sber.ru/docs/ru/gigachat/api/overview)
- üêõ **–ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã**: [GitHub Issues](https://github.com/tigusigalpa/gigachat-php/issues)
- üí¨ **–û–±—Å—É–∂–¥–µ–Ω–∏—è**: [GitHub Discussions](https://github.com/tigusigalpa/gigachat-php/discussions)

## üßë‚Äçüíª –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. **–§–æ—Ä–∫–Ω–∏—Ç–µ** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É** –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. **–ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** (`git commit -m 'Add amazing feature'`)
4. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É** (`git push origin feature/amazing-feature`)
5. **–û—Ç–∫—Ä–æ–π—Ç–µ Pull Request**

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –°–ª–µ–¥—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º PSR-12
- –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ commit —Å–æ–æ–±—â–µ–Ω–∏—è

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ email –Ω–∞ sovletig@gmail.com –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ
issue.

## üÜï Laravel 12 Support

SDK –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Laravel 12! –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- ‚úÖ Service Provider –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ Facade `GigaChat` –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ Artisan –∫–æ–º–∞–Ω–¥—ã `gigachat:test` –∏ `gigachat:chat`
- ‚úÖ Middleware `gigachat.rate_limit`
- ‚úÖ Trait `HasGigaChat` –¥–ª—è –º–æ–¥–µ–ª–µ–π

## üìà Roadmap

- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ PHP —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ PHP —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**

> üí° **–°–æ–≤–µ—Ç**: –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∏–∑—É—á–∞–π—Ç–µ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ SDK. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GigaChat
> API: https://developers.sber.ru/docs/ru/gigachat/api/overview

```php
use Tigusigalpa\GigaChat\Laravel\GigaChat;

$messages = [
['role' => 'user', 'content' => '–ü—Ä–∏–≤–µ—Ç! –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç.'],
];

$response = GigaChat::chat($messages, [
'model' => 'GigaChat',
'temperature' => 0.3,
]);

echo $response['choices'][0]['message']['content'] ?? '';

```

### –ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (SSE)

```php
GigaChat::chatStream($messages, ['model' => 'GigaChat'], function ($event, $error) {
    if ($event === '[DONE]') {
        return; // –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞
    }
    $delta = $event['choices'][0]['delta']['content'] ?? '';
    echo $delta;
});
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ Laravel

```php
use Tigusigalpa\GigaChat\Auth\TokenManager;
use Tigusigalpa\GigaChat\GigaChatClient;

$authKey = base64_encode('CLIENT_ID:CLIENT_SECRET');
$tm = new TokenManager($authKey, 'GIGACHAT_API_PERS');
$client = new GigaChatClient($tm);

$messages = [
    ['role' => 'user', 'content' => 'Hello!'],
];
$response = $client->chat($messages);
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å `POST https://ngw.devices.sberbank.ru:9443/api/v2/oauth` c –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
  `Content-Type: application/x-www-form-urlencoded`, `Accept: application/json`,
  `Authorization: Basic Base64(ClientID:ClientSecret)` –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `RqUID` (uuid4). –í —Ç–µ–ª–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
  `scope=GIGACHAT_API_PERS|GIGACHAT_API_B2B|GIGACHAT_API_CORP`.
- –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç ~30 –º–∏–Ω—É—Ç, SDK –æ–±–Ω–æ–≤–ª—è–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –ï—Å–ª–∏ —Å—Ä–µ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∑–∞–¥–∞–π—Ç–µ `GIGACHAT_CERT_PATH` –Ω–∞ –ø—É—Ç—å –∫ —Ü–µ–ø–æ—á–∫–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ NGW (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ
  `verify=true` –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP >= 7.4
- guzzlehttp/guzzle ^7.8
- Laravel 8+ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
